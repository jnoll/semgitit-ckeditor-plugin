<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Pandoc Plugin &mdash; CKEditor Sample</title>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <script type="text/javascript" src="../ckeditor.js"></script>
    <script src="sample.js" type="text/javascript"></script>
    <script type="text/javascript" src="../plugins/pandoc/pandocjson.js"></script>
    <link href="sample.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1 class="samples">
      CKEditor Sample &mdash; Pandoc Plugin
    </h1>
    <div class="description">
      <p>
	This sample shows how to configure CKEditor to output Pandoc
	JSON encoding instead of HTML.  Please note that the editor
	configuration was modified to reflect what is needed for
	editing Pandoc content: the toolbar is (will be) limited to
	headers, lists, links, tables, and simple inline markup, but
	NO FONTS!
      </p>

      <!-- This <div> holds alert messages to be display in the sample page. -->
      <div id="alerts">
	<noscript>
	  <p>
	    <strong>CKEditor requires JavaScript to run</strong>. In a
	      browser with no JavaScript support, like yours, you
	      should still see the contents (HTML data) and you should
	      be able to edit it normally, without a rich editor
	      interface.
	  </p>
	</noscript>
      </div>
      <form action="http://localhost/~jnoll/test/cgi-bin/pandoc.cgi" method="post">
	<p>
	  <label for="value">
	    Editor 1:</label>
	  <textarea cols="80" id="editor" name="value" rows="120">
[
  {
    "docAuthors": [], 
    "docDate": [], 
    "docTitle": []
  }, 
  [
    {
      "Header": [
        1, 
        [
          {
            "Str": "Header"
          }, 
          "Space", 
          {
            "Str": "1"
          }, 
          "Space", 
          {
            "Str": "-"
          }, 
          "Space", 
          {
            "Str": "inline"
          }, 
          "Space", 
          {
            "Str": "markup"
          }
        ]
      ]
    }, 
    {
      "Para": [
        {
          "Str": "An"
        }, 
        "Space", 
        {
          "Emph": [
            {
              "Str": "emphasized"
            }
          ]
        }, 
        "Space", 
        {
          "Strong": [
            {
              "Str": "bold"
            }
          ]
        }, 
        "Space", 
        {
          "Str": "plain"
        }, 
        "Space", 
        {
          "Str": "string"
        }, 
        {
          "Str": "."
        }
      ]
    }, 
    {
      "Header": [
        2, 
        [
          {
            "Str": "Header"
          }, 
          "Space", 
          {
            "Str": "2"
          }, 
          "Space", 
          {
            "Str": "-"
          }, 
          "Space", 
          {
            "Str": "links"
          }
        ]
      ]
    }, 
    {
      "Para": [
        {
          "Link": [
            [
              {
                "Str": "A"
              }, 
              "Space", 
              {
                "Str": "link"
              }
            ], 
            [
              "http://server.com/path/to/file.html", 
              ""
            ]
          ]
        }
      ]
    }, 
    {
      "Para": [
        {
          "Link": [
            [
              {
                "Str": "A"
              }, 
              "Space", 
              {
                "Str": "link"
              }, 
              "Space", 
              {
                "Str": "with"
              }, 
              "Space", 
              {
                "Str": "title"
              }
            ], 
            [
              "http://server.com/path/to/file.html", 
              "The Title"
            ]
          ]
        }
      ]
    }, 
    {
      "Header": [
        3, 
        [
          {
            "Str": "Header"
          }, 
          "Space", 
          {
            "Str": "3"
          }, 
          "Space", 
          {
            "Str": "-"
          }, 
          "Space", 
          {
            "Str": "images"
          }
        ]
      ]
    }, 
    {
      "Para": [
        {
          "Image": [
            [
              {
                "Str": "An"
              }, 
              "Space", 
              {
                "Str": "image"
              }
            ], 
            [
              "http://server.com/path/to/file.img", 
              "Alt Text"
            ]
          ]
        }
      ]
    }, 
    {
      "Header": [
        4, 
        [
          {
            "Str": "Header"
          }, 
          "Space", 
          {
            "Str": "4"
          }, 
          "Space", 
          {
            "Str": "-"
          }, 
          "Space", 
          {
            "Str": "lists"
          }
        ]
      ]
    }, 
    {
      "OrderedList": [
        [
          1, 
          "DefaultStyle", 
          "DefaultDelim"
        ], 
        [
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "first"
                }
              ]
            }
          ], 
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "second"
                }
              ]
            }
          ], 
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "third"
                }
              ]
            }
          ]
        ]
      ]
    }, 
    {
      "BulletList": [
        [
          {
            "Plain": [
              {
                "Str": "UL"
              }, 
              "Space", 
              {
                "Str": "first"
              }
            ]
          }
        ], 
        [
          {
            "Plain": [
              {
                "Str": "UL"
              }, 
              "Space", 
              {
                "Str": "second"
              }
            ]
          }
        ], 
        [
          {
            "Plain": [
              {
                "Str": "UL"
              }, 
              "Space", 
              {
                "Str": "third"
              }
            ]
          }
        ]
      ]
    }, 
    {
      "OrderedList": [
        [
          1, 
          "Decimal", 
          "Period"
        ], 
        [
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "1"
                }
              ]
            }
          ], 
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "2"
                }
              ]
            }
          ], 
          [
            {
              "Plain": [
                {
                  "Str": "OL"
                }, 
                "Space", 
                {
                  "Str": "3"
                }
              ]
            }
          ]
        ]
      ]
    }, 
    {
      "Header": [
        5, 
        [
          {
            "Str": "Header"
          }, 
          "Space", 
          {
            "Str": "5"
          }
        ]
      ]
    }
  ]
]

	  </textarea>
	  <script type="text/javascript">
	    //<![CDATA[

		// Replace the <textarea id="editor"> with an CKEditor
		// instance, using the "pandoc" plugin, shaping some of the
		// editor configuration to fit Pandoc editing.
		CKEDITOR.replace( 'editor', {
			extraPlugins : 'pandoc',
			// Remove unused plugins.
			removePlugins : 'bidi,button,dialogadvtab,div,filebrowser,flash,forms,horizontalrule,iframe,indent,justify,liststyle,pagebreak,showborders,stylescombo,table,tabletools,templates',
			// Width and height are not supported in the BBCode format, so object resizing is disabled.
			disableObjectResizing : true,
                        toolbar :
				[
                                        ['Format'],
					['Source', '-', 'Save','NewPage','-','Undo','Redo'],
					['Find','Replace','-','SelectAll','RemoveFormat'],
					['Link', 'Unlink', 'Image'],
					['Bold', 'Italic','Underline'],
					['NumberedList','BulletedList','-','Blockquote'],
					['Maximize']
				],
                        on : {
                            instanceReady : function( ev ) {
                            // Output paragraphs as <p>Text</p>.
                            this.dataProcessor.writer.setRules( 'p',
                                {
                                    indent : false,
                                    breakBeforeOpen : false,
                                    breakAfterOpen : false,
                                    breakBeforeClose : false,
                                    breakAfterClose : false
                                });
                            }
                       }
        
		} );

	    //]]>
	  </Script>
	</p>
	<p>
	  <input type="submit" value="Submit" />
	</p>
      </form>
      <div id="footer">
	<hr />
	<p>
	  CKEditor - The text editor for the Internet - <a class="samples" href="http://ckeditor.com/">http://ckeditor.com</a>
	</p>
	<p id="copy">
	  Copyright &copy; 2003-2012, <a class="samples" href="http://cksource.com/">CKSource</a> - Frederico
	  Knabben. All rights reserved.
	</p>
      </div>
</body>
</html>
